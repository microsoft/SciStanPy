<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Prior Predictive API Reference &#8212; SciStanPy Alpha documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=27fed22d" />
    <script src="../../../_static/documentation_options.js?v=6b921976"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Operations API Reference" href="../operations.html" />
    <link rel="prev" title="Plotting API Reference" href="plotting.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="prior-predictive-api-reference">
<h1>Prior Predictive API Reference<a class="headerlink" href="#prior-predictive-api-reference" title="Link to this heading">¶</a></h1>
<p>This reference covers the prior predictive simulation functionality in SciStanPy.</p>
<section id="prior-predictive-module">
<h2>Prior Predictive Module<a class="headerlink" href="#prior-predictive-module" title="Link to this heading">¶</a></h2>
<p>Prior predictive check functionality for SciStanPy models.</p>
<p>This module provides interactive widgets and visualizations for conducting
prior predictive checks on SciStanPy models. Prior predictive checks allow
users to examine the behavior of their models before fitting to data by
sampling from prior distributions and visualizing the resulting predictions.</p>
<p>The module centers around the PriorPredictiveCheck class, which creates
an interactive dashboard with sliders for model hyperparameters and
dropdown menus for selecting visualization options. This enables rapid
exploration of how different prior specifications affect model behavior.</p>
<dl class="simple">
<dt>Key Features:</dt><dd><ul class="simple">
<li><p>Interactive hyperparameter adjustment with sliders</p></li>
<li><p>Multiple visualization types (ECDF, KDE, violin, relationship plots)</p></li>
<li><p>Automatic widget configuration based on model structure</p></li>
<li><p>Real-time plot updates with efficient data processing</p></li>
<li><p>Support for multi-dimensional parameter exploration</p></li>
</ul>
</dd>
</dl>
<p>The interface automatically adapts to the structure of the provided model,
exposing only relevant parameters and visualization options based on the
data dimensions and available coordinates.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scistanpy.plotting.prior_predictive.</span></span><span class="sig-name descname"><span class="pre">PriorPredictiveCheck</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ssp_model.Model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interactive dashboard for conducting prior predictive checks.</p>
<p>This class creates a comprehensive interface for exploring model behavior
through prior predictive sampling. It automatically generates appropriate
widgets based on the model structure and provides multiple visualization
modes for examining parameter distributions and relationships.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>ssp_model.Model</em>) – SciStanPy model to analyze</p></li>
<li><p><strong>copy_model</strong> (<em>bool</em>) – Whether to create a copy of the model to avoid modifying the original.
Defaults to False, meaning updates to model parameters in the
interactive plot will be reflected in the original model object.</p></li>
</ul>
</dd>
<dt class="field-even">Variables<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>model</strong> – The model being analyzed (copy or reference)</p></li>
<li><p><strong>float_sliders</strong> – Dictionary of parameter adjustment sliders</p></li>
<li><p><strong>target_dropdown</strong> – Widget for selecting which parameter to visualize</p></li>
<li><p><strong>group_dim_dropdown</strong> – Widget for selecting grouping dimension</p></li>
<li><p><strong>independent_var_dropdown</strong> – Widget for selecting independent variable</p></li>
<li><p><strong>plot_type_dropdown</strong> – Widget for selecting visualization type</p></li>
<li><p><strong>draw_seed_entry</strong> – Widget for setting random seed</p></li>
<li><p><strong>draw_entry</strong> – Widget for setting number of experiments</p></li>
<li><p><strong>update_model_button</strong> – Button to update model and redraw data</p></li>
<li><p><strong>update_plot_button</strong> – Button to update plot without redrawing data</p></li>
<li><p><strong>fig</strong> – HoloViews pane containing the current plot</p></li>
</ul>
</dd>
</dl>
<p>The dashboard provides real-time updates as users adjust parameters.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add parameters and observables to model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">ModelSubclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Display dashboard in notebook or web application</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check</span> <span class="o">=</span> <span class="n">PriorPredictiveCheck</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">copy_model</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.display"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create and return the complete interactive dashboard layout.</p>
<p>This method assembles all widgets and the plot display into a
comprehensive dashboard layout suitable for display in Jupyter
notebooks, Panel applications, or web interfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Panel layout containing all interface elements</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pn.Row</p>
</dd>
</dl>
<p>The layout consists of:
- Left panel: Model hyperparameter sliders and viewing options
- Right panel: Interactive plot display that updates based on selections</p>
<p>All widgets are organized into logical groups with appropriate headers
for intuitive navigation and use.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">check</span> <span class="o">=</span> <span class="n">PriorPredictiveCheck</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span><span class="o">.</span><span class="n">servable</span><span class="p">()</span>  <span class="c1"># For web deployment</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_ecdf_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_ecdf_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for empirical CDF plots.</p>
<p>This method constructs the parameter dictionary needed for creating
ECDF visualizations using hvplot, including cumulative probability
calculations and appropriate hover interactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for ECDF plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘line’ for step-like ECDF appearance
- x: Target parameter values
- y: ‘Cumulative Probability’ (computed during data processing)
- by: Independent label for grouping multiple ECDFs
- datashade: Disabled (False) for ECDF plots to maintain clarity
- hover: Set to ‘hline’ for horizontal hover lines</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_kde_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_kde_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for kernel density estimate plots.</p>
<p>This method constructs the parameter dictionary needed for creating
KDE visualizations using hvplot, including appropriate grouping
and styling options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for KDE plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘kde’ for kernel density estimation
- x: <cite>None</cite> for KDE plots.
- y: Target parameter name for the y-axis
- by: Independent label for grouping (if applicable)
- datashade: Disabled (False) for KDE plots to maintain clarity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_relationship_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_relationship_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for relationship plots.</p>
<p>This method constructs the parameter dictionary for creating
relationship visualizations that show how parameters vary with
respect to independent variables, using datashading for performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for relationship plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘line’ for continuous relationships
- x: Independent variable name
- y: Target parameter name
- datashade: Enabled (True) for performance with large datasets
- dynamic: Disabled (False), resulting in all data being embedded in output
- aggregator: Set to ‘count’ for density-based coloring
- cmap: ‘inferno’ colormap</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_violin_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_violin_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate arguments for violin plot creation.</p>
<p>This method constructs the arguments needed for creating violin plots
using HoloViews, handling complex grouping scenarios and determining
appropriate categorization based on data structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary containing plot arguments and dimensions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The method handles multiple grouping scenarios:
- Single grouping by dimension index
- Grouping by both dimension and independent variable
- Automatic determination of primary vs. secondary grouping</p>
<p>The returned dictionary includes:
- args: Tuple of (groups…, values) for HoloViews Violin constructor
- kdims: List of key dimension names
- vdims: Value dimension name (target parameter)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_group_dim_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_group_dim_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update grouping dimension options based on selected target parameter.</p>
<p>This method configures the group dimension dropdown with appropriate
options based on the dimensionality of the currently selected target
parameter. It ensures that grouping options are only available for
multi-dimensional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event containing the new target parameter selection</p>
</dd>
</dl>
<p>The method updates both the dropdown options and the descriptive text
showing dimension sizes to help users understand the data structure.
If the previously selected grouping dimension is no longer valid,
it automatically resets to a sensible default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_independent_var_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_independent_var_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update independent variable options based on grouping dimension.</p>
<p>This method configures the independent variable dropdown with coordinates
and data variables that are compatible with the selected grouping
dimension. Only variables that vary along the grouping dimension are
included as options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event containing the new grouping dimension selection</p>
</dd>
</dl>
<p>The method scans both coordinates and data variables in the xarray
Dataset to find suitable independent variables, ensuring compatibility
with the selected visualization approach.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_plot_type_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_plot_type_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update available plot types based on current dimension selections.</p>
<p>This method determines which visualization types are appropriate
given the current selections for target parameter, grouping dimension,
and independent variable. It enables more sophisticated plot types
as more structure is specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event (used for callback compatibility is not used)</p>
</dd>
</dl>
<p>Plot Type Logic:
- ECDF and KDE: Always available for any parameter
- Violin: Available when grouping dimension is selected
- Relationship: Available when both grouping and independent variable are selected</p>
<p>The method automatically selects the most sophisticated available plot
type as the default when options change.</p>
</dd></dl>

</dd></dl>

</section>
<section id="prior-predictive-simulation">
<h2>Prior Predictive Simulation<a class="headerlink" href="#prior-predictive-simulation" title="Link to this heading">¶</a></h2>
<p>Prior predictive simulation is a crucial step in Bayesian model development that allows you to:</p>
<ul class="simple">
<li><p><strong>Validate model specifications</strong>: Check if your priors produce reasonable data</p></li>
<li><p><strong>Detect modeling errors</strong>: Identify issues before fitting to real data</p></li>
<li><p><strong>Understand prior implications</strong>: See what your priors actually imply about observable quantities</p></li>
<li><p><strong>Improve model design</strong>: Iterate on priors based on simulated outcomes</p></li>
</ul>
<p><strong>Integration with SciStanPy Models:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">scistanpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ssp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Define a simple measurement model</span>
<span class="n">true_value</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Prior on true value</span>
<span class="n">measurement_error</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">LogNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Likelihood connects parameters to observations</span>
<span class="n">likelihood</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="n">true_value</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">measurement_error</span><span class="p">)</span>

<span class="c1"># Build model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">likelihood</span><span class="p">)</span>

<span class="c1"># Prior predictive simulation</span>
<span class="n">prior_predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">prior_predictive</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Examine the range of possible data under your priors</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Predicted data range: [</span><span class="si">{</span><span class="n">prior_predictions</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">prior_predictions</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Workflow Integration:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Typical prior predictive workflow</span>

<span class="c1"># 1. Check if predictions are reasonable</span>
<span class="n">prior_samples</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">prior_predictive</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1"># 2. Compare to domain knowledge</span>
<span class="k">if</span> <span class="n">prior_samples</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: Model predicts negative values - check priors&quot;</span><span class="p">)</span>

<span class="c1"># 3. Visualize prior predictions</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">prior_samples</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Prior Predictive Distribution&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Predicted Values&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

<span class="c1"># 4. Iterate on priors if needed</span>
<span class="c1"># Adjust priors based on prior predictive results...</span>
</pre></div>
</div>
<p><strong>Advanced Usage:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prior predictive for hierarchical models</span>
<span class="k">class</span><span class="w"> </span><span class="nc">HierarchicalModel</span><span class="p">(</span><span class="n">ssp</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_data</span><span class="p">):</span>
        <span class="c1"># Group-level parameters</span>
        <span class="n">global_mean</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">group_variance</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">LogNormal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Individual group parameters</span>
        <span class="n">group_means</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span>
            <span class="n">mu</span><span class="o">=</span><span class="n">global_mean</span><span class="p">,</span>
            <span class="n">sigma</span><span class="o">=</span><span class="n">group_variance</span><span class="p">,</span>
            <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">group_data</span><span class="p">),)</span>
        <span class="p">)</span>

        <span class="c1"># Likelihood for each group</span>
        <span class="n">likelihoods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">group_data</span><span class="p">):</span>
            <span class="n">likelihood</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="n">group_means</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">likelihood</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">likelihoods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">likelihood</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">likelihoods</span><span class="p">)</span>

<span class="c1"># Prior predictive captures both levels of hierarchy</span>
<span class="n">hierarchical_model</span> <span class="o">=</span> <span class="n">HierarchicalModel</span><span class="p">(</span><span class="n">group_data</span><span class="p">)</span>
<span class="n">prior_predictions</span> <span class="o">=</span> <span class="n">hierarchical_model</span><span class="o">.</span><span class="n">prior_predictive</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Model Validation:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use prior predictive to validate model assumptions</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_prior_predictions</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">expected_range</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate that prior predictions fall within expected range.&quot;&quot;&quot;</span>

    <span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">prior_predictive</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="n">n_samples</span><span class="p">)</span>

    <span class="c1"># Check range</span>
    <span class="n">pred_min</span><span class="p">,</span> <span class="n">pred_max</span> <span class="o">=</span> <span class="n">predictions</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">predictions</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">exp_min</span><span class="p">,</span> <span class="n">exp_max</span> <span class="o">=</span> <span class="n">expected_range</span>

    <span class="k">if</span> <span class="n">pred_min</span> <span class="o">&lt;</span> <span class="n">exp_min</span> <span class="ow">or</span> <span class="n">pred_max</span> <span class="o">&gt;</span> <span class="n">exp_max</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: Predictions [</span><span class="si">{</span><span class="n">pred_min</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">pred_max</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">] &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;outside expected range [</span><span class="si">{</span><span class="n">exp_min</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">exp_max</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✓ Prior predictions within expected range&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># Validate temperature measurement model</span>
<span class="n">temp_model</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">temperature_likelihood</span><span class="p">)</span>
<span class="n">validate_prior_predictions</span><span class="p">(</span><span class="n">temp_model</span><span class="p">,</span> <span class="n">expected_range</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>  <span class="c1"># °C</span>
</pre></div>
</div>
<p><strong>Computational Considerations:</strong></p>
<p>The prior predictive functionality:</p>
<ul class="simple">
<li><p><strong>Backend Agnostic</strong>: Works with NumPy, PyTorch, and Stan backends</p></li>
<li><p><strong>Memory Efficient</strong>: Streams samples when possible to handle large simulations</p></li>
<li><p><strong>Parallel Compatible</strong>: Can leverage multiple cores for large models</p></li>
<li><p><strong>Cached Results</strong>: Optionally cache results for repeated analysis</p></li>
</ul>
<p><strong>Best Practices:</strong></p>
<ol class="arabic simple">
<li><p><strong>Always check prior predictions</strong> before fitting real data</p></li>
<li><p><strong>Use domain knowledge</strong> to validate prediction ranges</p></li>
<li><p><strong>Iterate on priors</strong> based on prior predictive results</p></li>
<li><p><strong>Document assumptions</strong> revealed by prior predictive analysis</p></li>
<li><p><strong>Compare predictions</strong> with actual data patterns when available</p></li>
<li><p><strong>Test extreme scenarios</strong> by examining tail behavior of predictions</p></li>
</ol>
</section>
</section>
<section id="prior-predictive">
<h1>Prior Predictive<a class="headerlink" href="#prior-predictive" title="Link to this heading">¶</a></h1>
<p>This page documents the interactive prior-predictive visualization helper
implemented in <cite>scistanpy.plotting.prior_predictive</cite>.</p>
<p>Prior predictive check functionality for SciStanPy models.</p>
<p>This module provides interactive widgets and visualizations for conducting
prior predictive checks on SciStanPy models. Prior predictive checks allow
users to examine the behavior of their models before fitting to data by
sampling from prior distributions and visualizing the resulting predictions.</p>
<p>The module centers around the PriorPredictiveCheck class, which creates
an interactive dashboard with sliders for model hyperparameters and
dropdown menus for selecting visualization options. This enables rapid
exploration of how different prior specifications affect model behavior.</p>
<dl class="simple">
<dt>Key Features:</dt><dd><ul class="simple">
<li><p>Interactive hyperparameter adjustment with sliders</p></li>
<li><p>Multiple visualization types (ECDF, KDE, violin, relationship plots)</p></li>
<li><p>Automatic widget configuration based on model structure</p></li>
<li><p>Real-time plot updates with efficient data processing</p></li>
<li><p>Support for multi-dimensional parameter exploration</p></li>
</ul>
</dd>
</dl>
<p>The interface automatically adapts to the structure of the provided model,
exposing only relevant parameters and visualization options based on the
data dimensions and available coordinates.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scistanpy.plotting.prior_predictive.</span></span><span class="sig-name descname"><span class="pre">PriorPredictiveCheck</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ssp_model.Model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interactive dashboard for conducting prior predictive checks.</p>
<p>This class creates a comprehensive interface for exploring model behavior
through prior predictive sampling. It automatically generates appropriate
widgets based on the model structure and provides multiple visualization
modes for examining parameter distributions and relationships.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>ssp_model.Model</em>) – SciStanPy model to analyze</p></li>
<li><p><strong>copy_model</strong> (<em>bool</em>) – Whether to create a copy of the model to avoid modifying the original.
Defaults to False, meaning updates to model parameters in the
interactive plot will be reflected in the original model object.</p></li>
</ul>
</dd>
<dt class="field-even">Variables<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>model</strong> – The model being analyzed (copy or reference)</p></li>
<li><p><strong>float_sliders</strong> – Dictionary of parameter adjustment sliders</p></li>
<li><p><strong>target_dropdown</strong> – Widget for selecting which parameter to visualize</p></li>
<li><p><strong>group_dim_dropdown</strong> – Widget for selecting grouping dimension</p></li>
<li><p><strong>independent_var_dropdown</strong> – Widget for selecting independent variable</p></li>
<li><p><strong>plot_type_dropdown</strong> – Widget for selecting visualization type</p></li>
<li><p><strong>draw_seed_entry</strong> – Widget for setting random seed</p></li>
<li><p><strong>draw_entry</strong> – Widget for setting number of experiments</p></li>
<li><p><strong>update_model_button</strong> – Button to update model and redraw data</p></li>
<li><p><strong>update_plot_button</strong> – Button to update plot without redrawing data</p></li>
<li><p><strong>fig</strong> – HoloViews pane containing the current plot</p></li>
</ul>
</dd>
</dl>
<p>The dashboard provides real-time updates as users adjust parameters.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add parameters and observables to model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">ssp</span><span class="o">.</span><span class="n">ModelSubclass</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Display dashboard in notebook or web application</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check</span> <span class="o">=</span> <span class="n">PriorPredictiveCheck</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">copy_model</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">display</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Row</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.display"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create and return the complete interactive dashboard layout.</p>
<p>This method assembles all widgets and the plot display into a
comprehensive dashboard layout suitable for display in Jupyter
notebooks, Panel applications, or web interfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Panel layout containing all interface elements</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pn.Row</p>
</dd>
</dl>
<p>The layout consists of:
- Left panel: Model hyperparameter sliders and viewing options
- Right panel: Interactive plot display that updates based on selections</p>
<p>All widgets are organized into logical groups with appropriate headers
for intuitive navigation and use.</p>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">check</span> <span class="o">=</span> <span class="n">PriorPredictiveCheck</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dashboard</span><span class="o">.</span><span class="n">servable</span><span class="p">()</span>  <span class="c1"># For web deployment</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_ecdf_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_ecdf_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for empirical CDF plots.</p>
<p>This method constructs the parameter dictionary needed for creating
ECDF visualizations using hvplot, including cumulative probability
calculations and appropriate hover interactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for ECDF plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘line’ for step-like ECDF appearance
- x: Target parameter values
- y: ‘Cumulative Probability’ (computed during data processing)
- by: Independent label for grouping multiple ECDFs
- datashade: Disabled (False) for ECDF plots to maintain clarity
- hover: Set to ‘hline’ for horizontal hover lines</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_kde_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_kde_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for kernel density estimate plots.</p>
<p>This method constructs the parameter dictionary needed for creating
KDE visualizations using hvplot, including appropriate grouping
and styling options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for KDE plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘kde’ for kernel density estimation
- x: <cite>None</cite> for KDE plots.
- y: Target parameter name for the y-axis
- by: Independent label for grouping (if applicable)
- datashade: Disabled (False) for KDE plots to maintain clarity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_relationship_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_relationship_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate keyword arguments for relationship plots.</p>
<p>This method constructs the parameter dictionary for creating
relationship visualizations that show how parameters vary with
respect to independent variables, using datashading for performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of hvplot parameters for relationship plotting</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The returned dictionary includes:
- kind: Set to ‘line’ for continuous relationships
- x: Independent variable name
- y: Target parameter name
- datashade: Enabled (True) for performance with large datasets
- dynamic: Disabled (False), resulting in all data being embedded in output
- aggregator: Set to ‘count’ for density-based coloring
- cmap: ‘inferno’ colormap</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_violin_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.get_violin_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate arguments for violin plot creation.</p>
<p>This method constructs the arguments needed for creating violin plots
using HoloViews, handling complex grouping scenarios and determining
appropriate categorization based on data structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary containing plot arguments and dimensions</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<p>The method handles multiple grouping scenarios:
- Single grouping by dimension index
- Grouping by both dimension and independent variable
- Automatic determination of primary vs. secondary grouping</p>
<p>The returned dictionary includes:
- args: Tuple of (groups…, values) for HoloViews Violin constructor
- kdims: List of key dimension names
- vdims: Value dimension name (target parameter)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_group_dim_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_group_dim_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update grouping dimension options based on selected target parameter.</p>
<p>This method configures the group dimension dropdown with appropriate
options based on the dimensionality of the currently selected target
parameter. It ensures that grouping options are only available for
multi-dimensional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event containing the new target parameter selection</p>
</dd>
</dl>
<p>The method updates both the dropdown options and the descriptive text
showing dimension sizes to help users understand the data structure.
If the previously selected grouping dimension is no longer valid,
it automatically resets to a sensible default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_independent_var_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_independent_var_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update independent variable options based on grouping dimension.</p>
<p>This method configures the independent variable dropdown with coordinates
and data variables that are compatible with the selected grouping
dimension. Only variables that vary along the grouping dimension are
included as options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event containing the new grouping dimension selection</p>
</dd>
</dl>
<p>The method scans both coordinates and data variables in the xarray
Dataset to find suitable independent variables, ensuring compatibility
with the selected visualization approach.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_plot_type_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Event</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../_modules/scistanpy/plotting/prior_predictive.html#PriorPredictiveCheck.set_plot_type_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Update available plot types based on current dimension selections.</p>
<p>This method determines which visualization types are appropriate
given the current selections for target parameter, grouping dimension,
and independent variable. It enables more sophisticated plot types
as more structure is specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>Event</em>) – Panel event (used for callback compatibility is not used)</p>
</dd>
</dl>
<p>Plot Type Logic:
- ECDF and KDE: Always available for any parameter
- Violin: Available when grouping dimension is selected
- Relationship: Available when both grouping and independent variable are selected</p>
<p>The method automatically selects the most sophisticated available plot
type as the default when options change.</p>
</dd></dl>

</dd></dl>

<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The module implements an interactive dashboard for conducting prior
predictive checks on SciStanPy models. The primary public class is
<cite>PriorPredictiveCheck</cite> which creates a Panel/HoloViews-based interface
that lets users draw from the model priors, inspect simulated outputs,
and interactively adjust toggleable model constants.</p>
<p>Key features (implemented)
- An interactive dashboard with widgets generated from model hyperparameters (toggleable constants are exposed as sliders).
- Multiple plot modes supported: ECDF, KDE, Violin, and Relationship plots.
- Reactive controls to select target variables, grouping dimensions, and independent variables for visualization.
- Methods to run the full pipeline (update model, draw samples, process data, and update the plot) as well as to update only the plot.
- Output is an interactive Panel layout suitable for Jupyter or Panel apps.</p>
</section>
<section id="primary-class-and-methods">
<h2>Primary class and methods<a class="headerlink" href="#primary-class-and-methods" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>PriorPredictiveCheck(model, copy_model: bool = False)
- Constructs the dashboard for the provided SciStanPy model.</p></li>
<li><p>display() -&gt; panel.Row
- Assemble and return the Panel layout for display.</p></li>
<li><p>_init_float_sliders()
- Create sliders for toggleable constants found in the model.</p></li>
<li><p>_update_model()
- Apply slider values back to the model constants.</p></li>
<li><p>_draw_data()
- Draw prior predictive samples from the model and store them as an xarray.Dataset.</p></li>
<li><p>_process_data()
- Convert the drawn xarray data into a pandas DataFrame adapted to the currently selected plot type and grouping choices.</p></li>
<li><p>_update_plot(event=None)
- Re-render the current plot using hvplot/HoloViews based on processed data.</p></li>
<li><p>_full_pipeline(event=None)
- Run the full flow: update model constants, draw new data, and refresh plot.</p></li>
</ul>
</section>
<section id="dependencies-and-notes">
<h2>Dependencies and notes<a class="headerlink" href="#dependencies-and-notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The dashboard uses Panel and HoloViews (hvplot) for widgets and plots.
Installing these packages is required for the interactive dashboard to work.</p></li>
<li><p>The implementation expects the provided SciStanPy model to expose
component metadata (e.g., <cite>named_model_components_dict</cite>, <cite>observables</cite>) and
to support the <cite>draw</cite> method for prior sampling.</p></li>
</ul>
</section>
<section id="minimal-usage-example">
<h2>Minimal usage example<a class="headerlink" href="#minimal-usage-example" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">scistanpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ssp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scistanpy.plotting.prior_predictive</span><span class="w"> </span><span class="kn">import</span> <span class="n">PriorPredictiveCheck</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">MySciStanPyModel</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># your model subclass</span>
<span class="n">check</span> <span class="o">=</span> <span class="n">PriorPredictiveCheck</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">copy_model</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dashboard</span> <span class="o">=</span> <span class="n">check</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="c1"># In a Jupyter notebook the dashboard can be displayed inline:</span>
<span class="n">dashboard</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Plotting API Reference</span></a> for the plotting package overview</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">SciStanPy</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">SciStanPy API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#top-level-package">Top-Level Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#module-overview">Module Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#quick-navigation">Quick Navigation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../custom_types.html">Custom Types API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../defaults.html">Defaults API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exceptions.html">Exceptions API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../model/index.html">Model API Reference</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Plotting API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operations.html">Operations API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils.html">Utils API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#usage-notes">Usage Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#stability">Stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#missing-something">Missing Something?</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">SciStanPy API Reference</a><ul>
  <li><a href="index.html">Plotting API Reference</a><ul>
      <li>Previous: <a href="plotting.html" title="previous chapter">Plotting API Reference</a></li>
      <li>Next: <a href="../operations.html" title="next chapter">Operations API Reference</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Bruce Wittmann.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.3.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../../_sources/rst/api/plotting/prior_predictive.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>